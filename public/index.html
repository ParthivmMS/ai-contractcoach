<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Improved viewport for cross-device scaling -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ContractCoach — AI contract analysis platform for risk detection, negotiation scripts and clause suggestions.">
    <title>ContractCoach - AI Contract Analysis Platform</title>

    <!-- Keep CSS separate -->
    <link rel="stylesheet" href="styles.css">

    <!-- Keep favicon (simple emoji SVG) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚖️</text></svg>">

</head>
<body>
    <header>
        <nav class="container">
            <div class="logo">ContractCoach</div>

            <!-- Mobile menu toggle -->
            <button id="mobileMenuBtn" class="mobile-menu-btn" aria-label="Toggle navigation" aria-expanded="false">
                <span class="hamburger"></span>
            </button>

            <ul class="nav-links" id="navLinks">
                <li><a href="#features">Features</a></li>
                <li><a href="#analyzer">Try It</a></li>
                <li><a href="#pricing">Pricing</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>

            <!-- ✅ NEW: Authentication Navigation -->
            <div class="auth-nav">
                <!-- Show when not logged in -->
                <div class="guest-nav" id="guestNav">
                    <button class="login-btn" id="loginBtn">Sign In</button>
                    <button class="cta-button signup-btn" id="signupBtn">Get Started</button>
                </div>
                
                <!-- Show when logged in -->
                <div class="user-nav" id="userNav" style="display: none;">
                    <div class="user-info">
                        <img class="user-avatar" id="userAvatar" src="" alt="User avatar" style="display: none;">
                        <div class="user-details">
                            <span class="user-name" id="userName">John Doe</span>
                            <span class="user-plan" id="userPlan">Free Plan (2/3 left)</span>
                        </div>
                    </div>
                    <div class="user-menu">
                        <button class="user-menu-btn" id="userMenuBtn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 16a1 1 0 01-.71-.29l-6-6a1 1 0 011.42-1.42L12 13.59l5.29-5.3a1 1 0 011.42 1.42l-6 6A1 1 0 0112 16z"/>
                            </svg>
                        </button>
                        <div class="user-dropdown" id="userDropdown">
                            <a href="#" id="profileLink">Profile</a>
                            <a href="#" id="billingLink">Billing</a>
                            <a href="#" id="upgradeLink">Upgrade</a>
                            <button id="logoutBtn">Sign Out</button>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <!-- ✅ NEW: Authentication Modals -->
    <!-- Login Modal -->
    <div class="modal-overlay" id="loginModal">
        <div class="modal-content auth-modal">
            <button class="modal-close" id="closeLoginModal">&times;</button>
            <div class="auth-header">
                <h2>Welcome Back</h2>
                <p>Sign in to your ContractCoach account</p>
            </div>
            
            <div class="social-auth">
                <button class="social-btn google-btn" id="googleLoginBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    Continue with Google
                </button>
                
                <button class="social-btn linkedin-btn" id="linkedinLoginBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#0077B5">
                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                    </svg>
                    Continue with LinkedIn
                </button>
            </div>
            
            <div class="auth-divider">
                <span>or</span>
            </div>
            
            <form class="auth-form" id="loginForm">
                <div class="form-group">
                    <input type="email" id="loginEmail" name="email" placeholder="Email address" required>
                </div>
                <div class="form-group">
                    <input type="password" id="loginPassword" name="password" placeholder="Password" required>
                </div>
                <div class="form-options">
                    <label class="checkbox-label">
                        <input type="checkbox" id="rememberMe">
                        <span class="checkmark"></span>
                        Remember me
                    </label>
                    <a href="#" class="forgot-password">Forgot password?</a>
                </div>
                <button type="submit" class="cta-button full-width" id="loginSubmitBtn">
                    <span class="btn-text">Sign In</span>
                    <span class="btn-spinner" style="display: none;"></span>
                </button>
            </form>
            
            <div class="auth-footer">
                <p>Don't have an account? <a href="#" id="switchToSignup">Sign up for free</a></p>
            </div>
        </div>
    </div>

    <!-- Signup Modal -->
    <div class="modal-overlay" id="signupModal">
        <div class="modal-content auth-modal">
            <button class="modal-close" id="closeSignupModal">&times;</button>
            <div class="auth-header">
                <h2>Get Started Free</h2>
                <p>Create your ContractCoach account</p>
            </div>
            
            <div class="social-auth">
                <button class="social-btn google-btn" id="googleSignupBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24">
                        <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
                        <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                        <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                        <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
                    </svg>
                    Sign up with Google
                </button>
                
                <button class="social-btn linkedin-btn" id="linkedinSignupBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="#0077B5">
                        <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                    </svg>
                    Sign up with LinkedIn
                </button>
            </div>
            
            <div class="auth-divider">
                <span>or</span>
            </div>
            
            <form class="auth-form" id="signupForm">
                <div class="form-row">
                    <div class="form-group">
                        <input type="text" id="signupFirstName" name="firstName" placeholder="First name" required>
                    </div>
                    <div class="form-group">
                        <input type="text" id="signupLastName" name="lastName" placeholder="Last name" required>
                    </div>
                </div>
                <div class="form-group">
                    <input type="email" id="signupEmail" name="email" placeholder="Email address" required>
                </div>
                <div class="form-group">
                    <input type="password" id="signupPassword" name="password" placeholder="Password (min. 8 characters)" required minlength="8">
                </div>
                <div class="form-options">
                    <label class="checkbox-label">
                        <input type="checkbox" id="agreeTerms" required>
                        <span class="checkmark"></span>
                        I agree to the <a href="#" target="_blank">Terms of Service</a> and <a href="#" target="_blank">Privacy Policy</a>
                    </label>
                </div>
                <button type="submit" class="cta-button full-width" id="signupSubmitBtn">
                    <span class="btn-text">Create Account</span>
                    <span class="btn-spinner" style="display: none;"></span>
                </button>
            </form>
            
            <div class="auth-footer">
                <p>Already have an account? <a href="#" id="switchToLogin">Sign in</a></p>
            </div>
        </div>
    </div>

    <!-- ✅ NEW: Authentication Required Modal -->
    <div class="modal-overlay" id="authRequiredModal">
        <div class="modal-content auth-required-modal">
            <button class="modal-close" id="closeAuthRequiredModal">&times;</button>
            <div class="auth-required-content">
                <div class="lock-icon">🔒</div>
                <h3>Sign In Required</h3>
                <p>Please sign in to analyze contracts and access your saved reports.</p>
                <div class="auth-required-buttons">
                    <button class="cta-button" id="authRequiredLoginBtn">Sign In</button>
                    <button class="cta-button secondary" id="authRequiredSignupBtn">Create Account</button>
                </div>
                <p class="auth-required-note">Free accounts get 3 contract analyses per month</p>
            </div>
        </div>
    </div>

    <main>
        <section class="hero">
            <div class="container">
                <h1>Your AI Contract Coach</h1>
                <p>Analyze contracts in seconds. Negotiate like a pro. Save thousands on legal fees.</p>
                <!-- ✅ UPDATED: Hero CTA now handles auth state -->
                <button class="cta-button hero-cta" id="heroAnalyzeBtn">Analyze Your First Contract Free</button>
            </div>
        </section>

        <section id="features" class="features">
            <div class="container">
                <h2>Stop Getting Trapped by Bad Contracts</h2>
                <p class="subtitle">For startups, freelancers, and small businesses who can't afford $500/hour lawyers</p>
                
                <div class="feature-grid">
                    <div class="feature-card">
                        <div class="feature-icon">🔍</div>
                        <h3>Instant Risk Detection</h3>
                        <p>AI scans your contract and flags risky clauses in plain English. No legal degree required.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">✏️</div>
                        <h3>Smart Alternatives</h3>
                        <p>Get market-standard clause alternatives that protect your interests better.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">💬</div>
                        <h3>Negotiation Scripts</h3>
                        <p>Know exactly what to say to improve contract terms. Friendly and firm options included.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">⚡</div>
                        <h3>Priority Actions</h3>
                        <p>Focus on what matters most. Get a ranked list of urgent, important, and optional changes.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">📊</div>
                        <h3>Risk Scoring</h3>
                        <p>Overall contract risk score (1-10) so you know how safe it is to sign as-is.</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">⚖️</div>
                        <h3>Expert-Backed</h3>
                        <p>AI trained on thousands of contracts with input from practicing commercial lawyers.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="analyzer" class="analyzer-section">
            <div class="container">
                <h2>Try ContractCoach Now</h2>
                <p class="subtitle">Upload your contract or try our demo clause analysis</p>
                
                <!-- ✅ UPDATED: Upload area now shows user limits when logged in -->
                <div class="upload-area" id="uploadArea" role="region" aria-label="Upload contract area">
                    <!-- ✅ NEW: User limits display -->
                    <div class="user-limits" id="userLimitsDisplay" style="display: none;">
                        <div class="limits-info">
                            <span class="limits-text" id="limitsText">Free Plan: 2 of 3 analyses remaining this month</span>
                            <a href="#pricing" class="upgrade-link" id="upgradeLinkSmall">Upgrade</a>
                        </div>
                    </div>

                    <div id="uploadContent">
                        <div class="upload-icon">📄</div>
                        <h3>Drop your contract here</h3>
                        <p>Supports PDF, Word, and text files up to 30 pages</p>

                        <!-- Hidden native input -->
                        <input type="file" id="fileInput" accept=".pdf,.doc,.docx,.txt" aria-label="Choose contract file">
                        <button class="cta-button" type="button" id="chooseFileBtn">Choose File</button>

                        <div class="or-divider">
                            <span>or</span>
                        </div>

                        <div class="paste-area">
                            <textarea id="contractText" placeholder="Paste your contract text here..." rows="6" aria-label="Paste contract text"></textarea>
                            <button class="cta-button" type="button" id="analyzeTextBtn">Analyze Pasted Text</button>
                        </div>
                    </div>
                </div>

                <div class="demo-section">
                    <p>Or try with this sample clause:</p>
                    <div class="demo-contract" id="demoClause" role="button" tabindex="0" aria-pressed="false">
                        <strong>Sample Termination Clause:</strong><br>
                        "Supplier may terminate this Agreement immediately upon written notice if Customer fails to pay any undisputed amount within 7 days of invoice."
                        <br><br>
                        <em>Click to analyze this clause ↗</em>
                    </div>
                </div>

                <div class="loading-animation" id="loadingAnimation" aria-live="polite">
                    <div class="spinner" aria-hidden="true"></div>
                    <p>Analyzing contract... This may take a few seconds</p>
                </div>

                <div class="analysis-results" id="analysisResults" aria-live="polite">
                    <h3>Analysis Complete</h3>
                    
                    <div class="risk-score">
                        <div class="score-circle risk-high" id="riskScore">8</div>
                        <div>
                            <h4>Overall Risk Score: High Risk</h4>
                            <p>This contract contains several clauses that could put you at significant disadvantage.</p>
                        </div>
                    </div>

                    <div class="progress-bar" aria-hidden="true">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>

                    <h4>🚨 Priority Issues Found:</h4>
                    
                    <div class="clause-item">
                        <h5>⚠️ Payment/Termination Clause - HIGH RISK</h5>
                        <p><strong>Why it's risky:</strong> A 7-day cure period is extremely short. Most businesses operate on 30-day payment cycles. Immediate termination gives the counterparty excessive leverage and could disrupt your operations unexpectedly.</p>
                        
                        <p><strong>Suggested alternative:</strong> "Supplier may terminate this Agreement if Customer fails to pay any undisputed amount within thirty (30) days after receipt of written notice."</p>
                        
                        <p><strong>What to say:</strong> "We typically operate on net-30 terms. Can we update the payment cure period to 30 days and include written notice before termination?"</p>
                        
                        <p><strong>Priority:</strong> <span class="urgent">URGENT</span> - Address before signing</p>
                    </div>

                    <h4>📋 Quick Action Checklist:</h4>
                    <ol class="action-list">
                        <li>Negotiate 30-day payment cure period instead of 7 days</li>
                        <li>Add requirement for written notice before termination</li>
                        <li>Consider adding a dispute resolution process</li>
                        <li>Review other payment terms for consistency</li>
                        <li>Get legal review if contract value &gt; $10,000</li>
                    </ol>

                    <div class="legal-disclaimer">
                        <strong>⚖️ Legal Disclaimer:</strong> This analysis is not legal advice. For binding legal advice, consult a licensed attorney in your jurisdiction.
                    </div>

                    <div class="action-buttons">
                        <button class="cta-button" onclick="downloadReport()">Download Full Report (PDF)</button>
                        <button class="cta-button secondary" onclick="handlePayment('expert-review')">Get Expert Review ($99)</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="pricing" class="pricing">
            <div class="container">
                <h2>Simple, Transparent Pricing</h2>
                <p class="subtitle">Pay per contract or save with a subscription</p>
                
                <div class="pricing-grid">
                    <div class="pricing-card">
                        <h3>Free Trial</h3>
                        <div class="price"><strong>$0</strong></div>
                        <p class="price-desc">3 contract analyses per month</p>
                        <ul class="feature-list">
                            <li class="included">Basic risk analysis</li>
                            <li class="included">Clause-by-clause review</li>
                            <li class="included">Negotiation tips</li>
                            <li class="excluded">PDF export</li>
                            <li class="excluded">Priority support</li>
                        </ul>
                        <button class="cta-button full-width" id="freeTrialBtn">Start Free</button>
                    </div>
                    
                    <div class="pricing-card featured">
                        <div class="popular-badge"><strong>MOST POPULAR</strong></div>
                        <h3>Pay Per Use</h3>
                        <div class="price"><strong>$9</strong></div>
                        <p class="price-desc">Per contract analysis</p>
                        <ul class="feature-list">
                            <li class="included">Complete risk analysis</li>
                            <li class="included">Alternative clauses</li>
                            <li class="included">Negotiation scripts</li>
                            <li class="included">PDF export</li>
                            <li class="included">7-day support</li>
                        </ul>
                        <button class="cta-button full-width" onclick="handlePayment('payperuse')">Analyze Contract</button>
                    </div>
                    
                    <div class="pricing-card">
                        <h3>Business Plan</h3>
                        <div class="price"><strong>$49</strong><span class="period">/month</span></div>
                        <p class="price-desc">Up to 20 contracts/month</p>
                        <ul class="feature-list">
                            <li class="included">Everything in Pay Per Use</li>
                            <li class="included">Team collaboration</li>
                            <li class="included">Advanced analytics</li>
                            <li class="included">Priority support</li>
                            <li class="included">API access</li>
                        </ul>
                        <button class="cta-button full-width" onclick="handlePayment('business')">Start 14-Day Trial</button>
                    </div>
                </div>
                
                <div class="expert-review">
                    <p>💡 <strong>Need legal expert review?</strong> Add human lawyer review for $99/contract</p>
                </div>
            </div>
        </section>

        <section id="contact" class="contact">
            <div class="container">
                <h2>Get in Touch</h2>
                <p class="subtitle">Questions about ContractCoach? We're here to help!</p>
                
                <div class="contact-grid">
                    <div class="contact-info">
                        <h3>Contact Information</h3>
                        <div class="contact-item">
                            <strong>📧 Email:</strong>
                            <a href="mailto:hello@contractcoach.com">hello@contractcoach.com</a>
                        </div>
                        <div class="contact-item">
                            <strong>💬 Support:</strong>
                            <a href="mailto:support@contractcoach.com">support@contractcoach.com</a>
                        </div>
                        <div class="contact-item">
                            <strong>🏢 Business Inquiries:</strong>
                            <a href="mailto:business@contractcoach.com">business@contractcoach.com</a>
                        </div>
                        <div class="contact-item">
                            <strong>⏰ Response Time:</strong>
                            <span>Usually within 24 hours</span>
                        </div>
                    </div>
                    
                    <div class="contact-form">
                        <h3>Send us a Message</h3>
                        <form id="contactForm">
                            <div class="form-group">
                                <input type="text" id="name" name="name" placeholder="Your Name" required>
                            </div>
                            <div class="form-group">
                                <input type="email" id="email" name="email" placeholder="Your Email" required>
                            </div>
                            <div class="form-group">
                                <select id="subject" name="subject" required>
                                    <option value="">Select Topic</option>
                                    <option value="general">General Question</option>
                                    <option value="pricing">Pricing & Plans</option>
                                    <option value="technical">Technical Support</option>
                                    <option value="business">Business Partnership</option>
                                    <option value="feedback">Feedback & Suggestions</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <textarea id="message" name="message" placeholder="Your Message" rows="5" required></textarea>
                            </div>
                            <button type="submit" class="cta-button full-width">Send Message</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 ContractCoach. Not a substitute for legal advice. Consult licensed attorneys for binding legal advice.</p>
        </div>
    </footer>

    <!-- Keep your external JS -->
    <script src="script.js"></script>

    <!-- Mobile menu toggle -->
    <script>
        (function(){
            const btn = document.getElementById('mobileMenuBtn');
            const nav = document.getElementById('navLinks');
            if (!btn || !nav) return;
            btn.addEventListener('click', () => {
                const expanded = btn.getAttribute('aria-expanded') === 'true';
                btn.setAttribute('aria-expanded', String(!expanded));
                nav.classList.toggle('open');
            });
        })();
    </script>
</body>
</html>
